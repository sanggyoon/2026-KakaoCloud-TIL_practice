## 목차

1. AWS 실습

---

### 1) AWS 실습

1. CloudFormation 설정
   1. AWS 서비스를 코드화
   2. 동일한 환경 구현 가능
   3. 일괄 삭제, 관리 가능
   4. yaml 파일 작성 예시

   ```yaml
   AWSTemplateFormatVersion: 2010-09-09
   Description: 'AWS Technical Essentials: Introduction to AWS Identity and Access Management'

   Parameters:
     AdministratorPassword:
       Type: String
       NoEcho: True

     PublicSubnet1Param:
       Description: Public Subnet 1
       Type: String
       Default: 10.1.11.0/24
       AllowedValues:
         - 10.1.11.0/24

     VPCCIDR:
       Description: CIDR Block for VPC
       Type: String
       Default: 10.1.0.0/16
       AllowedValues:
         - 10.1.0.0/16

     InstanceType:
       Default: t3.micro
       Description: EC2 instance type, e.g. m1.small, m1.large, etc.
       Type: String

     AmazonLinuxAMIID:
       Type: AWS::SSM::Parameter::Value<AWS::EC2::Image::Id>
       Default: /aws/service/ami-amazon-linux-latest/amzn-ami-hvm-x86_64-gp2

   Resources:
     VPC:
       Type: AWS::EC2::VPC
       Properties:
         CidrBlock: !Ref VPCCIDR
         EnableDnsSupport: true
         EnableDnsHostnames: true
         Tags:
           - Key: Name
             Value: Lab VPC

     InternetGateway:
       Type: AWS::EC2::InternetGateway
       DependsOn: VPC

     AttachGateway:
       Type: AWS::EC2::VPCGatewayAttachment
       Properties:
         VpcId: !Ref VPC
         InternetGatewayId: !Ref InternetGateway

     PublicSubnet1:
       Type: AWS::EC2::Subnet
       DependsOn: AttachGateway
       Properties:
         VpcId: !Ref VPC
         MapPublicIpOnLaunch: true
         CidrBlock: !Ref PublicSubnet1Param
         AvailabilityZone: !Select
           - 0
           - !GetAZs
         Tags:
           - Key: Name
             Value: Public Subnet 1

     PublicRouteTable:
       Type: AWS::EC2::RouteTable
       DependsOn: PublicSubnet1
       Properties:
         VpcId: !Ref VPC
         Tags:
           - Key: Name
             Value: Public

     PublicRoute:
       Type: AWS::EC2::Route
       Properties:
         RouteTableId: !Ref PublicRouteTable
         DestinationCidrBlock: 0.0.0.0/0
         GatewayId: !Ref InternetGateway

     PublicSubnet1RouteTableAssociation:
       Type: AWS::EC2::SubnetRouteTableAssociation
       DependsOn: PublicRoute
       Properties:
         SubnetId: !Ref PublicSubnet1
         RouteTableId: !Ref PublicRouteTable

     Ec2Server:
       DependsOn: PublicSubnet1RouteTableAssociation
       Type: AWS::EC2::Instance
       Properties:
         ImageId: !Ref AmazonLinuxAMIID
         InstanceType: !Ref InstanceType
         SecurityGroupIds:
           - !Ref Ec2SecurityGroup
         SubnetId: !Ref PublicSubnet1

     Ec2SecurityGroup:
       Type: AWS::EC2::SecurityGroup
       Properties:
         GroupDescription: VPC Security Group
         VpcId: !Ref VPC
         SecurityGroupIngress:
           - CidrIp: 0.0.0.0/0
             FromPort: 22
             IpProtocol: tcp
             ToPort: 22

     S3Bucket:
       Type: AWS::S3::Bucket

     user1:
       Type: AWS::IAM::User
       Properties:
         Path: /tech-ess-5-lab1/
         UserName: user-1
         LoginProfile:
           Password: !Ref AdministratorPassword

     user2:
       Type: AWS::IAM::User
       Properties:
         Path: /tech-ess-5-lab1/
         UserName: user-2
         LoginProfile:
           Password: !Ref AdministratorPassword

     user3:
       Type: AWS::IAM::User
       Properties:
         Path: /tech-ess-5-lab1/
         UserName: user-3
         LoginProfile:
           Password: !Ref AdministratorPassword

     S3support:
       Type: AWS::IAM::Group
       Properties:
         Path: /tech-ess-5-lab1/
         GroupName: S3-Support
         ManagedPolicyArns:
           - arn:aws:iam::aws:policy/AmazonS3ReadOnlyAccess

     EC2admin:
       Type: AWS::IAM::Group
       Properties:
         Path: /tech-ess-5-lab1/
         GroupName: EC2-Admin
         Policies:
           - PolicyName: EC2-Admin-Policy
             PolicyDocument:
               Version: '2012-10-17'
               Statement:
                 - Effect: Allow
                   Action:
                     - ec2:Describe*
                     - ec2:StartInstances
                     - ec2:StopInstances
                     - cloudwatch:DescribeAlarms
                   Resource:
                     - '*'

     EC2support:
       Type: AWS::IAM::Group
       Properties:
         Path: /tech-ess-5-lab1/
         GroupName: EC2-Support
         ManagedPolicyArns:
           - arn:aws:iam::aws:policy/AmazonEC2ReadOnlyAccess

   Outputs:
     AdministratorPassword:
       Value: !Ref AdministratorPassword

     InstanceId:
       Value: !Ref Ec2Server

     Region:
       Value: !Ref AWS::Region

     S3Bucket:
       Value: !Ref S3Bucket
   ```

2. AWS 리전, AZ
3. AWS 요금 정책
